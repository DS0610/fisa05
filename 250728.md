# 250728 pymysql, docker
---
## df를 데이터베이스 서버로 보내기
- SQLAlchemy
    - python에서 사용하는 대표적인 ORM
        - ORM(Object Relational Mapping)
            - 객체와 DB의 테이블이 매핑을 이루는 것
            - DB의 테이블을 객체화 시켜서 데이터 CRUD
            - SQL 직접 작성하지 않고 테이블 조작
            - 사용하는 DBMS가 변경된다면 엔진만 바꿔주면 됨
            - 쿼리 대신 메소드를 이용해서 CRUD
```
df.to_sql(name=테이블이름, con=engine, if_exists='append', index=False)

# DataFrame은 항상 index가 있기 때문에, index=False로 작성
# if_exists = 'fail': 같은 이름의 Table이 존재할 경우 ValueError

# if_exists = 'replace': 같은 이름의 Table이 존재할 경우 기존 Table을 Drop하고 새로운 값을 Insert함
# if_exists = 'append': 같은 이름의 Table이 존재할 경우 기존 Table에 추가로 새로운 값을 Insert함
```

## DOCKER
#### 용어
- 커널 
    - 운영체제 중 항상 메모리에 올라가 있는 운영체제의 핵심 부분
    - 하드웨어와 응용 프로그램 사이에서 인터페이스를 제공하는 역할
    - 컴퓨터 자원들을 관리하는 역할
    - 시스템의 모든 것을 통제

- 컨테이너
    - 다른 프로세스와 격리된 상태로 OS에서 SW를 실행하는 기술

- DOCKER란
    - 리눅스의 응용 프로그램들을 SW 컨테이너 내에 배치하는 작업을 자동화하는 오픈소스 프로젝트
    - Linux 컨테이너 기반
    - 일관되고 재현 가능한 애플리케이션 배포 방법을 제공 -> 소프트웨어 개발 및 배포의 효율성, 안정성 및 이식성을 향상

- DOCKER 사용 이유
    - 애플리케이션을 관리하는 것과 동일한 방식으로 인프라를 관리할 수 있음
    - 애플리케이션을 신속하게 구축, 테스트 및 배포할 수 있는 소프트웨어 플랫폼

- DOCKER 플랫폼 기능
    - 적은 리소스로 더 많은 작업을 수행해야 하는 고밀도 환경과 배포에 적합
    - 컨테이너의 수명 주기를 관리하기 위한 도구 및 플랫폼을 제공

- Docker 컨테이너
    - 이미지를 읽기 전용으로 사용
    - 생성된 각 컨테이너는 각기 독립된 파일시스템을 제공 받으며, 호스트와 분리되어 있음 ->  특정 컨테이너에 애플리케이션을 설치하거나 삭제해도 다른 컨테이너와 호스트는 변화 없음

### Docker 사용 방법 실행
![Docker 기본 명령어](https://paperdoll.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd2800cd1-addd-41cb-a00b-0d06ffb66e89%2FUntitled.png?table=block&id=183efd73-3489-817e-9367-e83702034453&spaceId=d1a988f4-e527-4f37-84f2-5cf57ae3d75a&width=1250&userId=&cache=v2)
```
Docker는 컨테이너 가상화 기술을 이용한 컨테이너 이미지 관리 및 배포를 위한 오픈소스 플랫폼

도커의 기본 명령어

1. docker run: 컨테이너 실행
예시: docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
    - `d`: 백그라운드에서 컨테이너 실행
    - `it`: 인터랙티브 모드로 컨테이너를 실행하며 터미널 입력을 받을 수 있게 함
    - `--name <name>`: 컨테이너에 이름을 지정
    - `p <host_port>:<container_port>`: 호스트의 포트(외부)를 컨테이너의 포트(내부)에 매핑
    - `v <host_dir>:<container_dir>`: 호스트 디렉토리를 컨테이너 디렉토리에 마운트
    - `-rm`: 컨테이너가 종료되면 자동으로 삭제
    - `--privileged` : Docker 컨테이너를 호스트 시스템과 거의 동일한 수준의 권한으로 실행할 때 사용

2. docker ps: 실행 중인 컨테이너를 확인
예시: docker ps [OPTIONS]
    - `a`: 모든 컨테이너(실행 중이 아닌 컨테이너 포함)를 나열
    - `q`: 컨테이너 ID만 표시
    - `f <filter>`: 특정 조건에 맞는 컨테이너만 나열
3. docker stop: 실행 중인 컨테이너를 중지
예시: docker stop [OPTIONS] CONTAINER [CONTAINER...]
    - `-t <seconds>`: 컨테이너가 중지될 때까지 기다리는 시간을 지정
4. docker rm: 컨테이너를 삭제
예시: docker rm [OPTIONS] CONTAINER [CONTAINER...]
    - `f`: 강제 삭제
    - `v`: 컨테이너와 연결된 볼륨도 함께 삭제
5. docker images: 로컬에 저장된 모든 이미지를 확인
예시: docker images [OPTIONS] [REPOSITORY[:TAG]]
    - `a`: 모든 이미지를 나열(태그가 없는 이미지 포함)
    - `q`: 이미지 ID만 표시
    - `-filter`: 특정 조건에 맞는 이미지만 나열
6. docker pull: 도커 이미지를 다운로드
예시: docker pull [OPTIONS] NAME[:TAG|@DIGEST]
7. docker push: 도커 이미지를 Docker Hub와 같은 이미지 레지스트리에 업로드
예시: docker push [OPTIONS] NAME[:TAG]
8. docker exec: 실행 중인 컨테이너에서 명령어를 실행
예시: docker exec [OPTIONS] CONTAINER COMMAND [ARG...]
    - `it`: 인터랙티브 모드로 실행하며, 터미널 입력을 받을 수 있게 함
    - `-user <user>`: 특정 사용자로 명령어를 실행
9. docker build: 도커 이미지를 빌드
예시: docker build [OPTIONS] PATH | URL | -
    - `t <tag>`: 이미지에 태그를 지정
    - `f <dockerfile>`: 사용할 Dockerfile을 지정
    - `-build-arg <arg>`: 빌드 타임에 사용할 인수를 지정
10. docker-compose: 여러 컨테이너를 관리하고 실행하는데 사용되는 명령어
예시: docker-compose [OPTIONS] COMMAND [SERVICE...]

```